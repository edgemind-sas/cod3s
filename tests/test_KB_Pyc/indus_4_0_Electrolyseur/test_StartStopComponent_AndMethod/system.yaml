system:
  name: test_run_cod3S_StartStopComponent_AndMethod
  python_class: SystemHybrid

imports:
  - tests/test_KB_Pyc/indus_4_0_Electrolyseur/Lib/composants.py
  - tests/test_KB_Pyc/indus_4_0_Electrolyseur/Lib/objFlow.py
  
components:
  - name: "B1"
    cls: "Battery"
    flow_types: ["Elec"]
    capacity: 6
    content_ini:
      Elec: 6
    flow_nominal: 6
    init_state: "start"
    method: "and"

  - name: "CT_content"
    cls: "Sensor"
    measure: "content"

  - name: "Autom_1"
    cls: "Automaton"
    active_threshold: "> 5"
    inactive_threshold: "< 5"
    
  - name: "Autom_2"
    cls: "Automaton"
    active_threshold: "> 5"
    inactive_threshold: "< 5"

  - name: "Autom_3"
    cls: "Automaton"
    active_threshold: "> 8"
    inactive_threshold: "< 8"

  - name: "consumer_Elec"
    cls: "Consumer"
    flow_nominal: 6

connections:
  - component_source: "B1"
    interface_source: "content_total"
    component_target: "CT_content"
    interface_target: "in"

  - component_source: "CT_content"
    interface_source: "out"
    component_target: "Autom_1"
    interface_target: "in"

  - component_source: "CT_content"
    interface_source: "out"
    component_target: "Autom_2"
    interface_target: "in"

  - component_source: "CT_content"
    interface_source: "out"
    component_target: "Autom_3"
    interface_target: "in"

  - component_source: "Autom_1"
    interface_source: "out"
    component_target: "B1"
    interface_target: "cmd"

  - component_source: "Autom_2"
    interface_source: "out"
    component_target: "B1"
    interface_target: "cmd"

  - component_source: "Autom_3"
    interface_source: "out"
    component_target: "B1"
    interface_target: "cmd"

  - component_source: "B1"
    interface_source: "Elec_out"
    component_target: "consumer_Elec"
    interface_target: "in"
